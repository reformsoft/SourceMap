<!DOCTYPE html>
<html>
<head>
  <title>MapTap</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyADY5kcjJrAU5MM_rImge2LTWK4Nbfc5OA&sensor=false">
    </script>
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <%= javascript_include_tag "jquery.blockUI" %>
    
    <script type="text/javascript">
    	var data = {
				3242: {
					X: 49.457637,
					Y: -2.58
				}
			};
			
		$(function() {
			
			var myOptions = {
				center: new google.maps.LatLng(49.457637, -2.580414),
				zoom: 12,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};

        	var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    		
    		$(".goto").click(function() {
    			var id = parseInt($(this).attr("id"));
    			var r = data[id];
    			
    			// with the data we've got the X/Y, so using the map
    			// zoom and go to that point
    			map.panTo(new google.maps.LatLng(r.X, r.Y));
    			map.setZoom(18);
    		});
    		
    		$(".info").click(function() {
    			// show a dialog with all info
    			$.ajax({
    				url: "/map/types",
    				beforeSend: function(xhr) {
    					$.blockUI({
    						
    					});
    				},
    				success: function(data) {
    					$.unblockUI();
    				},
    				error: function() {
    					$.unblockUI();
    				}
    			});
    		});
    	});
    
		
    </script>
</head>
<body>

<div id="top">
	<ul>
		<li id="popular_views">Popular Views:</li>
		<li><a href="/restaurants">Restaurants</a></li>
		<li><a href="/recycling-points">Recycling Points</a></li>
		<li><a href="/bus-routes">Bus Routes</a></li>
		<li><a href="/post-boxes">Post Boxes</a></li>
		<li><a href="/garages">Garages</a></li>
		<li><a href="/phone-boxes">Phone Boxes</a></li>
		<li><a href="/more">More &raquo;</a></li>
	</ul>
</div>

<div id="map_canvas"></div>

<div id="content">
	<div id="padded_content">
		<%= yield %>
	</div>
</div>

</body>
</html>